## 03. mongoDB для api-сервиса

Базу данных необходимо хранить за пределами контейнера, чтобы в случаи остановки или удаления контейнера, данные не были потеряны. Для этой задачи предусмотрен **docker volume**.

**Volume - это папка на хостовой машине прикрепленная к контейнеру**, и когда контейнер будет остановлен или удален - данные в этой папке не пострадают. 

Описание как создавать volume см. файл docker-compose.yml

Просмотреть список volume:
`docker volume ls`

### Volume для development

Файл *docker-compose.yml* предназначен для продакшена, а для разработки необходимо создать новый файл - *docker-compose.development.yml*. В данном файле мы можем переопределить необходимые нам комманды - это могут быть как простые комманды запуска проекта, переменные окружения, так и определение новых volume, которые необходимы только в режиме development. 

**Определение volume в режиме development помогает в решении следующей задачи:**    
когда мы сбилдили и запустили проект с помощью комманды `docker-compose up --build`, а затем внесли изменения в код - нам, чтобы увидеть изменения, приходится останавливать проект `ctrl + C`, а затем выполнять `docker-compose up --build` опять. Чтобы решить данную проблему, в режиме development мы создаем новый volume, в который помещаем весь исходный код и во время его запуска - используем nodemon.   
Для реализации данной задачи см. файлы:
- docker-compose.development.yml
- api\nodemon.json
- api\package.json

Билд + запуск для development-mode (первым происходит считывание файла docker-compose.yml, вторым docker-compose.development.yml - в результате совпадающие комманды второго файла перезатрут первый):
`docker-compose -f docker-compose.yml -f docker-compose.development.yml up --build`
